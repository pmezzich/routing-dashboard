<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prebid Request Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Prebid Request Dashboard</h1>

    <div class="toggle-container">
      <button class="toggle-button active" onclick="showRequests('member')">Members</button>
      <button class="toggle-button" onclick="showRequests('non-member')">Non-Members</button>
    </div>

    <div id="requests"></div>
  </div>

  <script>
    let currentView = 'member';

    function loadRequests() {
      fetch('requests.json')
        .then(response => response.json())
        .then(data => {
          window.requestsData = data;
          renderRequests();
        });
    }

    function renderRequests() {
      const container = document.getElementById('requests');
      container.innerHTML = '';

      const filtered = window.requestsData.filter(r => r.status === currentView);

      filtered.forEach(entry => {
        const card = document.createElement('div');
        card.className = 'card';

        card.innerHTML = `
          <h2>
            <a href="${entry.url}" target="_blank">${entry.title}</a>
            <span class="status ${entry.status}">${entry.status.replace('-', ' ')}</span>
          </h2>
          <p><strong>Author:</strong> ${entry.author}</p>
          <p><strong>Company:</strong> ${entry.company}</p>
          <p class="timestamp">Submitted: ${new Date(entry.timestamp).toLocaleString()}</p>
        `;

        container.appendChild(card);
      });
    }

    function showRequests(type) {
      currentView = type;
      document.querySelectorAll('.toggle-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.toggle-button')[type === 'member' ? 0 : 1].classList.add('active');
      renderRequests();
    }

    loadRequests();
  </script>
</body>
</html>
